<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cooperatively gives up a timeslice to the OS scheduler."><meta name="keywords" content="rust, rustlang, rust-lang, yield_now"><title>yield_now in std::thread - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize1.58.0.css"><link rel="stylesheet" type="text/css" href="../../rustdoc1.58.0.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light1.58.0.css" id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark1.58.0.css" disabled=""><link rel="stylesheet" type="text/css" href="../../ayu1.58.0.css" disabled=""><script id="default-settings"></script><script src="../../storage1.58.0.js"></script><script src="../../crates1.58.0.js"></script><script defer="" src="../../main1.58.0.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript1.58.0.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x161.58.0.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x321.58.0.png"><link rel="icon" type="image/svg+xml" href="../../favicon1.58.0.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow1.58.0.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../std/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo1.58.0.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="../index.html">std</a>::<wbr><a href="index.html">thread</a></h2><div id="sidebar-vars" data-name="yield_now" data-ty="fn" data-relpath=""></div><script defer="" src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush1.58.0.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel1.58.0.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Function <a href="../index.html">std</a>::<wbr><a href="index.html">thread</a>::<wbr><a class="fn" href="#">yield_now</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard1.58.0.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/std/thread/mod.rs.html#695-697" title="goto source code">[src]</a></span></h1><div class="docblock item-decl"><pre class="rust fn"><code>pub fn yield_now()</code></pre></div><details class="rustdoc-toggle top-doc" open=""><summary class="hideme"><span>Expand description</span></summary><div class="docblock" xpath="/html[1]/body[1]/section[1]/details[1]/div[1]" istranslationnode="true" main_mp="c3VkOz5xbHdlYGQ7PnxtYHx1T397Yg=="><p class="translate-text">合作放弃时间片给 OS 调度程序。</p><p>Cooperatively gives up a timeslice to the OS scheduler.</p>
<p class="translate-text">这会调用底层操作系统调度程序的 yield 原语，表示调用线程愿意放弃其剩余的时间片，以便操作系统可以在 CPU 上调度其他线程。</p><p>This calls the underlying OS scheduler’s yield primitive, signaling
that the calling thread is willing to give up its remaining timeslice
so that the OS may schedule other threads on the CPU.</p>
<p class="translate-text">在循环中让步的一个缺点是，如果操作系统没有任何其他准备好的线程可以在当前 CPU 上运行，则该线程将有效地忙于等待，这会浪费 CPU 时间和精力。</p><p>A drawback of yielding in a loop is that if the OS does not have any
other ready threads to run on the current CPU, the thread will effectively
busy-wait, which wastes CPU time and energy.</p>
<p class="translate-text">因此，在等待感兴趣的事件时，程序员的首选应该是使用同步设备，例如“channel”、“Condvar”、“Mutex”或“join”，因为这些原语是以阻塞方式实现的，给出 启动 CPU，直到发生感兴趣的事件，以避免重复让步。</p><p>Therefore, when waiting for events of interest, a programmer’s first
choice should be to use synchronization devices such as <a href="../sync/mpsc/index.html"><code>channel</code></a>s,
<a href="../sync/struct.Condvar.html"><code>Condvar</code></a>s, <a href="../sync/struct.Mutex.html"><code>Mutex</code></a>es or <a href="struct.JoinHandle.html#method.join"><code>join</code></a> since these primitives are
implemented in a blocking manner, giving up the CPU until the event
of interest has occurred which avoids repeated yielding.</p>
<p class="translate-text">因此，`yield_now` 应该很少使用，主要是在需要重复轮询的情况下，因为没有其他合适的方法可以了解何时发生了感兴趣的事件。</p><p><code>yield_now</code> should thus be used only rarely, mostly in situations where
repeated polling is required because there is no other suitable way to
learn when an event of interest has occurred.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std::thread</span>;

<span class="ident">thread::yield_now</span>();</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Athread%3B%0A%0Athread%3A%3Ayield_now()%3B%0A%7D&amp;edition=2018">Run</a></div>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="std" data-search-index-js="../../search-index1.58.0.js" data-search-js="../../search1.58.0.js"></div>
</body></html>