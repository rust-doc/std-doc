<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Asserts that a boolean expression is `true` at runtime."><meta name="keywords" content="rust, rustlang, rust-lang, debug_assert"><title>debug_assert in std - Rust</title><link rel="stylesheet" type="text/css" href="../normalize1.56.1.css"><link rel="stylesheet" type="text/css" href="../rustdoc1.56.1.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light1.56.1.css" id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark1.56.1.css" disabled=""><link rel="stylesheet" type="text/css" href="../ayu1.56.1.css" disabled=""><script id="default-settings"></script><script src="../storage1.56.1.js"></script><script src="../crates1.56.1.js"></script><noscript><link rel="stylesheet" href="../noscript1.56.1.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x161.56.1.png"><link rel="alternate icon" type="image/png" href="../favicon-32x321.56.1.png"><link rel="icon" type="image/svg+xml" href="../favicon1.56.1.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow1.56.1.svg");}</style></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../std/index.html'><div class='logo-container rust-logo'><img src='../rust-logo1.56.1.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="index.html">std</a></h2><div id="sidebar-vars" data-name="debug_assert" data-ty="macro" data-relpath=""></div><script defer="" src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush1.56.1.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled="" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel1.56.1.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Macro <a href="index.html">std</a>::<wbr><a class="macro" href="#">debug_assert</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard1.56.1.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/core/macros/mod.rs.html#214-216" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><div class="example-wrap"><pre class="rust macro"><code><span class="macro">macro_rules!</span> <span class="ident">debug_assert</span> {
    ($(<span class="macro-nonterminal">$</span><span class="macro-nonterminal">arg</span> : <span class="ident">tt</span>) <span class="kw-2">*</span>) <span class="op">=</span><span class="op">&gt;</span> { ... };
}</code></pre></div>
</div><details class="rustdoc-toggle top-doc" open=""><summary class="hideme"><span>Expand description</span></summary><div class="docblock" xpath="/html[1]/body[1]/section[1]/details[1]/div[1]" istranslationnode="true" main_mp="Y25yZD4/aWRjc29yPj9gYHJkd051ZmdwYmU=" sub_mp="[&quot;c3VkOz5hYWd1Zl9gd3Zhd2Q=&quot;]"><p class="translate-text">断言布尔表达式在运行时为真。</p><p>Asserts that a boolean expression is <code>true</code> at runtime.</p>
<p class="translate-text">这将引发panic！ 如果提供的表达式在运行时无法评估为 true，则为宏。</p><p>This will invoke the <a href="macro.panic.html" title="panic!"><code>panic!</code></a> macro if the provided expression cannot be
evaluated to <code>true</code> at runtime.</p>
<p class="translate-text">与 assert! 一样，此宏也有第二个版本，可以提供自定义紧急消息。</p><p>Like <a href="macro.assert.html" title="assert!"><code>assert!</code></a>, this macro also has a second version, where a custom panic
message can be provided.</p>
<h1 id="uses" class="section-header"><a href="#uses">Uses</a></h1>
<p class="translate-text">与 assert! 不同，debug_assert! 默认情况下，语句仅在非优化构建中启用。 优化的构建不会执行 debug_assert！ 语句，除非将 -C debug-assertions 传递给编译器。 这使得 debug_assert！ 对于那些成本太高而无法在发布版本中出现但在开发过程中可能会有所帮助的检查很有用。 扩展 debug_assert 的结果！ 总是类型检查。</p><p>Unlike <a href="macro.assert.html" title="assert!"><code>assert!</code></a>, <code>debug_assert!</code> statements are only enabled in non
optimized builds by default. An optimized build will not execute
<code>debug_assert!</code> statements unless <code>-C debug-assertions</code> is passed to the
compiler. This makes <code>debug_assert!</code> useful for checks that are too
expensive to be present in a release build but may be helpful during
development. The result of expanding <code>debug_assert!</code> is always type checked.</p>
<p class="translate-text">未经检查的断言允许处于不一致状态的程序继续运行，这可能会产生意想不到的后果，但不会引入不安全性，只要这仅发生在安全代码中即可。 然而，断言的性能成本通常是不可测量的。 替换断言！ 使用调试断言！ 因此，只有在彻底分析之后才鼓励使用，更重要的是，仅在安全代码中！</p><p>An unchecked assertion allows a program in an inconsistent state to keep
running, which might have unexpected consequences but does not introduce
unsafety as long as this only happens in safe code. The performance cost
of assertions, however, is not measurable in general. Replacing <a href="macro.assert.html" title="assert!"><code>assert!</code></a>
with <code>debug_assert!</code> is thus only encouraged after thorough profiling, and
more importantly, only in safe code!</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// the panic message for these assertions is the stringified value of the</span>
<span class="comment">// expression given.</span>
<span class="macro">debug_assert!</span>(<span class="bool-val">true</span>);

<span class="kw">fn</span> <span class="ident">some_expensive_computation</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span> { <span class="bool-val">true</span> } <span class="comment">// a very simple function</span>
<span class="macro">debug_assert!</span>(<span class="ident">some_expensive_computation</span>());

<span class="comment">// assert with a custom message</span>
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="bool-val">true</span>;
<span class="macro">debug_assert!</span>(<span class="ident">x</span>, <span class="string">&quot;x wasn&#39;t true!&quot;</span>);

<span class="kw">let</span> <span class="ident">a</span> <span class="op">=</span> <span class="number">3</span>; <span class="kw">let</span> <span class="ident">b</span> <span class="op">=</span> <span class="number">27</span>;
<span class="macro">debug_assert!</span>(<span class="ident">a</span> <span class="op">+</span> <span class="ident">b</span> <span class="op">=</span><span class="op">=</span> <span class="number">30</span>, <span class="string">&quot;a = {}, b = {}&quot;</span>, <span class="ident">a</span>, <span class="ident">b</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%2F%2F%20the%20panic%20message%20for%20these%20assertions%20is%20the%20stringified%20value%20of%20the%0A%2F%2F%20expression%20given.%0Afn%20main()%20%7B%0Adebug_assert!(true)%3B%0A%0Afn%20some_expensive_computation()%20-%3E%20bool%20%7B%20true%20%7D%20%2F%2F%20a%20very%20simple%20function%0Adebug_assert!(some_expensive_computation())%3B%0A%0A%2F%2F%20assert%20with%20a%20custom%20message%0Alet%20x%20%3D%20true%3B%0Adebug_assert!(x%2C%20%22x%20wasn't%20true!%22)%3B%0A%0Alet%20a%20%3D%203%3B%20let%20b%20%3D%2027%3B%0Adebug_assert!(a%20%2B%20b%20%3D%3D%2030%2C%20%22a%20%3D%20%7B%7D%2C%20b%20%3D%20%7B%7D%22%2C%20a%2C%20b)%3B%0A%7D&amp;edition=2018">Run</a></div>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="std" data-search-index-js="../search-index1.56.1.js" data-search-js="../search1.56.1.js"></div>
    <script src="../main1.56.1.js"></script>
</body></html>