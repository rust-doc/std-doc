<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Returns the ABI-required minimum alignment of the type of the value that `val` points to."><meta name="keywords" content="rust, rustlang, rust-lang, align_of_val_raw"><title>align_of_val_raw in core::mem - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize1.56.1.css"><link rel="stylesheet" type="text/css" href="../../rustdoc1.56.1.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light1.56.1.css" id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark1.56.1.css" disabled=""><link rel="stylesheet" type="text/css" href="../../ayu1.56.1.css" disabled=""><script id="default-settings"></script><script src="../../storage1.56.1.js"></script><script src="../../crates1.56.1.js"></script><noscript><link rel="stylesheet" href="../../noscript1.56.1.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x161.56.1.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x321.56.1.png"><link rel="icon" type="image/svg+xml" href="../../favicon1.56.1.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow1.56.1.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../core/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo1.56.1.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="../index.html">core</a>::<wbr><a href="index.html">mem</a></h2><div id="sidebar-vars" data-name="align_of_val_raw" data-ty="fn" data-relpath=""></div><script defer="" src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush1.56.1.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled="" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel1.56.1.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Function <a href="../index.html">core</a>::<wbr><a href="index.html">mem</a>::<wbr><a class="fn" href="#">align_of_val_raw</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard1.56.1.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/core/mem/mod.rs.html#512-515" title="goto source code">[src]</a></span></h1><pre class="rust fn"><code>pub unsafe fn align_of_val_raw&lt;T:&nbsp;?<a class="trait" href="../marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt;(val: *const T) -&gt; usize</code></pre><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>layout_for_ptr</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/69835">#69835</a>)</div></div><details class="rustdoc-toggle top-doc" open=""><summary class="hideme"><span>Expand description</span></summary><div class="docblock" xpath="/html[1]/body[1]/section[1]/details[1]/div[1]" istranslationnode="true" main_mp="Y25yZD4/aWBtOzpgaGxja09+dk5idHhKYnBn"><p class="translate-text">返回 val 指向的值类型的 ABI 要求的最小对齐方式。</p><p>Returns the <a href="https://en.wikipedia.org/wiki/Application_binary_interface">ABI</a>-required minimum alignment of the type of the value that <code>val</code> points to.</p>
<p class="translate-text">每个对 T 类型值的引用都必须是该数字的倍数。</p><p>Every reference to a value of the type <code>T</code> must be a multiple of this number.</p>
<h1 id="safety" class="section-header"><a href="#safety">Safety</a></h1>
<p class="translate-text">只有在以下条件成立时，才能安全调用此函数：</p><p>This function is only safe to call if the following conditions hold:</p>
<ul>
<li class="translate-text">如果 T 是 Sized，则此函数始终可以安全调用。</li><li>If <code>T</code> is <code>Sized</code>, this function is always safe to call.</li>
<li class="translate-text">如果 T 的未调整大小的尾部是：</li><li>If the unsized tail of <code>T</code> is:
<ul>
<li class="translate-text">一个切片，那么切片尾部的长度必须是一个初始化的整数，并且整个值的大小（动态尾部长度+静态大小的前缀）必须适合 isize。</li><li>a <a href="https://doc.rust-lang.org/1.56.1/std/primitive.slice.html" title="slice">slice</a>, then the length of the slice tail must be an initialized
integer, and the size of the <em>entire value</em>
(dynamic tail length + statically sized prefix) must fit in <code>isize</code>.</li>
<li class="translate-text">一个 trait 对象，那么指针的 vtable 部分必须指向一个通过 unsizing coercion 获得的有效 vtable，并且整个值的大小（动态尾部长度 + 静态大小的前缀）必须适合 isize。</li><li>a <a href="../../book/ch17-02-trait-objects.html">trait object</a>, then the vtable part of the pointer must point
to a valid vtable acquired by an unsizing coercion, and the size
of the <em>entire value</em> (dynamic tail length + statically sized prefix)
must fit in <code>isize</code>.</li>
<li class="translate-text">一个（不稳定的）外部类型，那么这个函数总是可以安全地调用，但可能会panic或返回错误的值，因为外部类型的布局是未知的。 这与 align_of_val 在引用具有外部类型尾部的类型时的行为相同。</li><li>an (unstable) <a href="../../unstable-book/language-features/extern-types.html">extern type</a>, then this function is always safe to
call, but may panic or otherwise return the wrong value, as the
extern type’s layout is not known. This is the same behavior as
<a href="fn.align_of_val.html" title="align_of_val"><code>align_of_val</code></a> on a reference to a type with an extern type tail.</li>
<li class="translate-text">否则，保守地不允许调用该函数。</li><li>otherwise, it is conservatively not allowed to call this function.</li>
</ul>
</li>
</ul>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#![<span class="ident">feature</span>(<span class="ident">layout_for_ptr</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem</span>;

<span class="macro">assert_eq!</span>(<span class="number">4</span>, <span class="kw">unsafe</span> { <span class="ident">mem::align_of_val_raw</span>(<span class="kw-2">&amp;</span><span class="number">5i32</span>) });</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(layout_for_ptr)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3B%0A%0Aassert_eq!(4%2C%20unsafe%20%7B%20mem%3A%3Aalign_of_val_raw(%265i32)%20%7D)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="core" data-search-index-js="../../search-index1.56.1.js" data-search-js="../../search1.56.1.js"></div>
    <script src="../../main1.56.1.js"></script>
</body></html>