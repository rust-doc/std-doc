<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An interface for dealing with asynchronous iterators."><meta name="keywords" content="rust, rustlang, rust-lang, Stream"><title>Stream in core::stream - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize1.56.1.css"><link rel="stylesheet" type="text/css" href="../../rustdoc1.56.1.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light1.56.1.css" id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark1.56.1.css" disabled=""><link rel="stylesheet" type="text/css" href="../../ayu1.56.1.css" disabled=""><script id="default-settings"></script><script src="../../storage1.56.1.js"></script><script src="../../crates1.56.1.js"></script><noscript><link rel="stylesheet" href="../../noscript1.56.1.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x161.56.1.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x321.56.1.png"><link rel="icon" type="image/svg+xml" href="../../favicon1.56.1.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow1.56.1.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../core/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo1.56.1.png' alt='logo'></div></a><h2 class="location">Trait Stream</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#associated-types">Associated Types</a></h3><div class="sidebar-links"><a href="#associatedtype.Item">Item</a></div><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.poll_next">poll_next</a></div><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><div class="sidebar-links"><a href="#method.size_hint">size_hint</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">Other items in<br><a href="../index.html">core</a>::<wbr><a href="index.html">stream</a></h2><div id="sidebar-vars" data-name="Stream" data-ty="trait" data-relpath=""></div><script defer="" src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush1.56.1.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled="" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel1.56.1.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="../index.html">core</a>::<wbr><a href="index.html">stream</a>::<wbr><a class="trait" href="#">Stream</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard1.56.1.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/core/stream/stream/mod.rs.html#15-80" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust trait"><code>pub trait Stream {
    type <a href="#associatedtype.Item" class="type">Item</a>;
    fn <a href="#tymethod.poll_next" class="fnname">poll_next</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self: <a class="struct" href="../pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;&amp;mut Self&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cx: &amp;mut <a class="struct" href="../task/struct.Context.html" title="struct core::task::Context">Context</a>&lt;'_&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="../task/enum.Poll.html" title="enum core::task::Poll">Poll</a>&lt;<a class="enum" href="../option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="type" href="trait.Stream.html#associatedtype.Item" title="type core::stream::Stream::Item">Item</a>&gt;&gt;;

    fn <a href="#method.size_hint" class="fnname">size_hint</a>(&amp;self) -&gt; (usize, <a class="enum" href="../option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;usize&gt;) { ... }
}</code></pre></div><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>async_stream</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/79024">#79024</a>)</div></div><details class="rustdoc-toggle top-doc" open=""><summary class="hideme"><span>Expand description</span></summary><div class="docblock" xpath="/html[1]/body[1]/section[1]/details[1]/div[1]" istranslationnode="true" main_mp="Y25yZD4/d3FyZGFsPj93cWJ0cXwuL0dhYnRxfA==" sub_mp="[&quot;Y25yZD4/d3FyZGFsPj9XcWJ0cXw=&quot;]"><p class="translate-text">处理异步迭代器的接口。</p><p>An interface for dealing with asynchronous iterators.</p>
<p class="translate-text">这是主流Trait。 有关流概念的更多信息，请参阅模块级文档。 特别是，您可能想知道如何实现 Stream。</p><p>This is the main stream trait. For more about the concept of streams
generally, please see the <a href="index.html">module-level documentation</a>. In particular, you
may want to know how to <a href="index.html#implementing-stream">implement <code>Stream</code></a>.</p>
</div></details><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open=""><summary><div id="associatedtype.Item" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/stream/stream/mod.rs.html#17" title="goto source code">[src]</a></div><h4 class="code-header">type <a href="#associatedtype.Item" class="type">Item</a></h4></div></summary><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>async_stream</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/79024">#79024</a>)</div></div><div class="docblock"><p>The type of items yielded by the stream.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open=""><summary><div id="tymethod.poll_next" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/stream/stream/mod.rs.html#48" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.poll_next" class="fnname">poll_next</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self: <a class="struct" href="../pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;&amp;mut Self&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;cx: &amp;mut <a class="struct" href="../task/struct.Context.html" title="struct core::task::Context">Context</a>&lt;'_&gt;<br>) -&gt; <a class="enum" href="../task/enum.Poll.html" title="enum core::task::Poll">Poll</a>&lt;<a class="enum" href="../option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="type" href="trait.Stream.html#associatedtype.Item" title="type core::stream::Stream::Item">Item</a>&gt;&gt;</h4></div></summary><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>async_stream</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/79024">#79024</a>)</div></div><div class="docblock" xpath="/html[1]/body[1]/section[1]/div[4]/details[1]/div[2]" istranslationnode="true" main_mp="Y25yZD4/d3FyZGFsPj93cWJ0cXwuL0dhYnRxfC4vZHpMTX9PQV1Q" sub_mp="[&quot;Y25yZD4/d3FyZGFsPj9XcWJ0cXwuL2R6fH1Pf3FtYA==&quot;]"><p class="translate-text">尝试提取此流的下一个值，如果该值尚不可用，则注册当前任务以进行唤醒，如果流耗尽则返回 None。</p><p>Attempt to pull out the next value of this stream, registering the
current task for wakeup if the value is not yet available, and returning
<code>None</code> if the stream is exhausted.</p>
<h1 id="return-value" class="section-header"><a href="#return-value">Return value</a></h1>
<p class="translate-text">有几个可能的返回值，每个表示不同的流状态：</p><p>There are several possible return values, each indicating a distinct
stream state:</p>
<ul>
<li class="translate-text">Poll::Pending 意味着这个流的下一个值还没有准备好。 实现将确保在下一个值可能准备好时通知当前任务。</li><li>
<p><code>Poll::Pending</code> means that this stream’s next value is not ready
yet. Implementations will ensure that the current task will be notified
when the next value may be ready.</p>
</li>
<li class="translate-text">Poll::Ready(Some(val)) 表示流已成功生成值 val，并且可能会在后续 poll_next 调用中生成更多值。</li><li>
<p><code>Poll::Ready(Some(val))</code> means that the stream has successfully
produced a value, <code>val</code>, and may produce further values on subsequent
<code>poll_next</code> calls.</p>
</li>
<li class="translate-text">Poll::Ready(None) 表示流已终止，不应再次调用 poll_next。</li><li>
<p><code>Poll::Ready(None)</code> means that the stream has terminated, and
<code>poll_next</code> should not be invoked again.</p>
</li>
</ul>
<h1 id="panics" class="section-header"><a href="#panics">Panics</a></h1>
<p class="translate-text">一旦流完成（从 poll_next 返回 Ready(None)），再次调用其 poll_next 方法可能会出现panic、永远阻塞或导致其他类型的问题； Stream trait 对这种调用的效果没有任何要求。 然而，由于 poll_next 方法没有被标记为不安全，Rust 的通常规则适用：无论流的状态如何，调用都不能导致未定义的行为（内存损坏、不安全函数的错误使用等）。</p><p>Once a stream has finished (returned <code>Ready(None)</code> from <code>poll_next</code>), calling its
<code>poll_next</code> method again may panic, block forever, or cause other kinds of
problems; the <code>Stream</code> trait places no requirements on the effects of
such a call. However, as the <code>poll_next</code> method is not marked <code>unsafe</code>,
Rust’s usual rules apply: calls must never cause undefined behavior
(memory corruption, incorrect use of <code>unsafe</code> functions, or the like),
regardless of the stream’s state.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open=""><summary><div id="method.size_hint" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/stream/stream/mod.rs.html#77-79" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.size_hint" class="fnname">size_hint</a>(&amp;self) -&gt; (usize, <a class="enum" href="../option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;usize&gt;)</h4></div></summary><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>async_stream</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/79024">#79024</a>)</div></div><div class="docblock" xpath="/html[1]/body[1]/section[1]/div[5]/details[1]/div[2]" istranslationnode="true" main_mp="Y25yZD4/d3FyZGFsPj93cWJ0cXwuL0dhYnRxfC4vZ3xaRH9JTUtQ" sub_mp="[&quot;Y25yZD4/d3FyZGFsPj9XcWJ0cXwuL2d8anRPeX17YA==&quot;]"><p class="translate-text">返回流剩余长度的界限。</p><p>Returns the bounds on the remaining length of the stream.</p>
<p class="translate-text">具体来说， size_hint() 返回一个元组，其中第一个元素是下限，第二个元素是上限。</p><p>Specifically, <code>size_hint()</code> returns a tuple where the first element
is the lower bound, and the second element is the upper bound.</p>
<p class="translate-text">返回的元组的后半部分是 Option<usize>。 这里的 None 意味着要么没有已知的上限，要么上限大于 usize。</usize></p><p>The second half of the tuple that is returned is an <a href="../option/enum.Option.html" title="Option"><code>Option</code></a><code>&lt;</code><a href="https://doc.rust-lang.org/1.56.1/std/primitive.usize.html" title="usize"><code>usize</code></a><code>&gt;</code>.
A <a href="../option/enum.Option.html#variant.None" title="None"><code>None</code></a> here means that either there is no known upper bound, or the
upper bound is larger than <a href="https://doc.rust-lang.org/1.56.1/std/primitive.usize.html" title="usize"><code>usize</code></a>.</p>
<h1 id="implementation-notes" class="section-header"><a href="#implementation-notes">Implementation notes</a></h1>
<p class="translate-text">不强制流实现产生声明的元素数量。 有问题的流可能会产生小于元素的下限或大于上限的结果。</p><p>It is not enforced that a stream implementation yields the declared
number of elements. A buggy stream may yield less than the lower bound
or more than the upper bound of elements.</p>
<p class="translate-text">size_hint() 主要用于优化，例如为流的元素保留空间，但不能信任，例如，在不安全的代码中省略边界检查。 size_hint() 的错误实现不应导致内存安全违规。</p><p><code>size_hint()</code> is primarily intended to be used for optimizations such as
reserving space for the elements of the stream, but must not be
trusted to e.g., omit bounds checks in unsafe code. An incorrect
implementation of <code>size_hint()</code> should not lead to memory safety
violations.</p>
<p class="translate-text">也就是说，实现应该提供正确的估计，否则将违反 trait 的协议。</p><p>That said, the implementation should provide a correct estimation,
because otherwise it would be a violation of the trait’s protocol.</p>
<p class="translate-text">默认实现返回 (0, None) 这对于任何流都是正确的。</p><p>The default implementation returns <code>(0, </code><a href="../option/enum.Option.html#variant.None" title="None"><code>None</code></a><code>)</code> which is correct for any
stream.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Stream" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/stream/from_iter.rs.html#28-38" title="goto source code">[src]</a></div><a href="#impl-Stream" class="anchor"></a><h3 class="code-header in-band">impl&lt;I:&nbsp;<a class="trait" href="../iter/trait.Iterator.html" title="trait core::iter::Iterator">Iterator</a>&gt; <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a> for <a class="struct" href="struct.FromIter.html" title="struct core::stream::FromIter">FromIter</a>&lt;I&gt;</h3></div></summary><div class="impl-items"><div id="associatedtype.Item-1" class="type trait-impl has-srclink"><a href="#associatedtype.Item-1" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Item" class="type">Item</a> = I::<a class="type" href="../iter/trait.Iterator.html#associatedtype.Item" title="type core::iter::Iterator::Item">Item</a></h4></div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Stream-1" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/stream/stream/mod.rs.html#96-110" title="goto source code">[src]</a></div><a href="#impl-Stream-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;P&gt; <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a> for <a class="struct" href="../pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;P&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="../ops/trait.DerefMut.html" title="trait core::ops::DerefMut">DerefMut</a> + <a class="trait" href="../marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;P::<a class="type" href="../ops/trait.Deref.html#associatedtype.Target" title="type core::ops::Deref::Target">Target</a>: <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a>,&nbsp;</span></h3></div></summary><div class="impl-items"><div id="associatedtype.Item-2" class="type trait-impl has-srclink"><a href="#associatedtype.Item-2" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Item" class="type">Item</a> = &lt;P::<a class="type" href="../ops/trait.Deref.html#associatedtype.Target" title="type core::ops::Deref::Target">Target</a> as <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a>&gt;::<a class="type" href="trait.Stream.html#associatedtype.Item" title="type core::stream::Stream::Item">Item</a></h4></div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Stream-2" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/panic/unwind_safe.rs.html#294-305" title="goto source code">[src]</a></div><a href="#impl-Stream-2" class="anchor"></a><h3 class="code-header in-band">impl&lt;S:&nbsp;<a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a>&gt; <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a> for <a class="struct" href="../panic/struct.AssertUnwindSafe.html" title="struct core::panic::AssertUnwindSafe">AssertUnwindSafe</a>&lt;S&gt;</h3></div></summary><div class="impl-items"><div id="associatedtype.Item-3" class="type trait-impl has-srclink"><a href="#associatedtype.Item-3" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Item" class="type">Item</a> = S::<a class="type" href="trait.Stream.html#associatedtype.Item" title="type core::stream::Stream::Item">Item</a></h4></div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Stream-3" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../src/core/stream/stream/mod.rs.html#83-93" title="goto source code">[src]</a></div><a href="#impl-Stream-3" class="anchor"></a><h3 class="code-header in-band">impl&lt;S:&nbsp;?<a class="trait" href="../marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a> + <a class="trait" href="../marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>&gt; <a class="trait" href="trait.Stream.html" title="trait core::stream::Stream">Stream</a> for &amp;mut S</h3></div></summary><div class="impl-items"><div id="associatedtype.Item-4" class="type trait-impl has-srclink"><a href="#associatedtype.Item-4" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Item" class="type">Item</a> = S::<a class="type" href="trait.Stream.html#associatedtype.Item" title="type core::stream::Stream::Item">Item</a></h4></div></div></details></div><script type="text/javascript" src="../../implementors/core/stream/trait.Stream.js" async=""></script></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="core" data-search-index-js="../../search-index1.56.1.js" data-search-js="../../search1.56.1.js"></div>
    <script src="../../main1.56.1.js"></script>
</body></html>