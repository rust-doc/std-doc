<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Sets the MXCSR register with the 32-bit unsigned integer value."><meta name="keywords" content="rust, rustlang, rust-lang, _mm_setcsr"><title>_mm_setcsr in core::arch::x86_64 - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize1.56.1.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc1.56.1.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light1.56.1.css" id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark1.56.1.css" disabled=""><link rel="stylesheet" type="text/css" href="../../../ayu1.56.1.css" disabled=""><script id="default-settings"></script><script src="../../../storage1.56.1.js"></script><script src="../../../crates1.56.1.js"></script><noscript><link rel="stylesheet" href="../../../noscript1.56.1.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x161.56.1.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x321.56.1.png"><link rel="icon" type="image/svg+xml" href="../../../favicon1.56.1.svg"><style type="text/css">#crate-search{background-image:url("../../../down-arrow1.56.1.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../core/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo1.56.1.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="../../index.html">core</a>::<wbr><a href="../index.html">arch</a>::<wbr><a href="index.html">x86_64</a></h2><div id="sidebar-vars" data-name="_mm_setcsr" data-ty="fn" data-relpath=""></div><script defer="" src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../brush1.56.1.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled="" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../wheel1.56.1.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Function <a href="../../index.html">core</a>::<wbr><a href="../index.html">arch</a>::<wbr><a href="index.html">x86_64</a>::<wbr><a class="fn" href="#">_mm_setcsr</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard1.56.1.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span class="since" title="Stable since Rust version 1.27.0">1.27.0</span><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/core/up/up/stdarch/crates/core_arch/src/x86/sse.rs.html#1515-1517" title="goto source code">[src]</a></span></h1><pre class="rust fn"><code>pub unsafe fn _mm_setcsr(val: u32)</code></pre><div class="item-info"><div class="stab portability">This is supported on <strong>x86-64 and target feature <code>sse</code></strong> only.</div></div><details class="rustdoc-toggle top-doc" open=""><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p class="translate-text"><a href='#' xpath='/html[1]/body[1]/section[1]/details[1]/div[1]/p[1]' onclick='ShowHelpTranslateDialog(this)'>[帮助纠正😄]</a>使用 32 位无符号整数值设置 MXCSR 寄存器。</p><p>Sets the MXCSR register with the 32-bit unsigned integer value.</p>
<p class="translate-text">该寄存器控制 SIMD 指令如何处理浮点运算。 修改这个寄存器只会影响当前线程。</p><p>This register constrols how SIMD instructions handle floating point
operations. Modifying this register only affects the current thread.</p>
<p class="translate-text">它包含几组标志：</p><p>It contains several groups of flags:</p>
<ul>
<li class="translate-text">异常标志报告自上次重置以来发生了哪些异常。</li><li>
<p><em>Exception flags</em> report which exceptions occurred since last they were
reset.</p>
</li>
<li class="translate-text">屏蔽标志可用于屏蔽（忽略）某些异常。 默认情况下，这些标志都设置为 1，因此所有异常都被屏蔽。 当一个异常被屏蔽时，处理器简单地设置异常标志并继续操作。 如果该异常未被屏蔽，则该标志也会被设置，但还会调用一个异常处理程序。</li><li>
<p><em>Masking flags</em> can be used to mask (ignore) certain exceptions. By
default
these flags are all set to 1, so all exceptions are masked. When an
an exception is masked, the processor simply sets the exception flag and
continues the operation. If the exception is unmasked, the flag is also set
but additionally an exception handler is invoked.</p>
</li>
<li class="translate-text">舍入模式标志控制浮点指令的舍入模式。</li><li>
<p><em>Rounding mode flags</em> control the rounding mode of floating point
instructions.</p>
</li>
<li class="translate-text">denormals-are-zero 模式标志将所有将被非规格化（指数位全为零）的数字变为零。</li><li>
<p>The <em>denormals-are-zero mode flag</em> turns all numbers which would be
denormalized (exponent bits are all zeros) into zeros.</p>
</li>
</ul>
<h2 id="exception-flags" class="section-header"><a href="#exception-flags">Exception Flags</a></h2>
<ul>
<li class="translate-text">_MM_EXCEPT_INVALID：执行了无效操作（例如，将 Infinity 除以 Infinity）。</li><li>
<p><code>_MM_EXCEPT_INVALID</code>: An invalid operation was performed (e.g., dividing
Infinity by Infinity).</p>
</li>
<li class="translate-text">_MM_EXCEPT_DENORM：试图对非规范化数字进行操作。 主要是这会导致精度损失。</li><li>
<p><code>_MM_EXCEPT_DENORM</code>: An operation attempted to operate on a denormalized
number. Mainly this can cause loss of precision.</p>
</li>
<li class="translate-text">_MM_EXCEPT_DIV ZERO：发生被零除。</li><li>
<p><code>_MM_EXCEPT_DIV_ZERO</code>: Division by zero occured.</p>
</li>
<li class="translate-text">_MM_EXCEPT_OVERFLOW：发生数值溢出异常，即结果太大而无法表示（例如，绝对值大于 2^128 的 f32）。</li><li>
<p><code>_MM_EXCEPT_OVERFLOW</code>: A numeric overflow exception occured, i.e., a
result was too large to be represented (e.g., an <code>f32</code> with absolute
value
greater than <code>2^128</code>).</p>
</li>
<li class="translate-text">_MM_EXCEPT_UNDERFLOW：发生数值下溢异常，即结果太小而无法以标准化方式表示（例如，绝对值小于 2^-126 的 f32。）</li><li>
<p><code>_MM_EXCEPT_UNDERFLOW</code>: A numeric underflow exception occured, i.e., a
result was too small to be represented in a normalized way (e.g., an
<code>f32</code>
with absulte value smaller than <code>2^-126</code>.)</p>
</li>
<li class="translate-text">_MM_EXCEPT_INEXACT：发生不精确结果异常（也称为精度异常）。 这意味着由于四舍五入而损失了一些精度。 例如，分数 1/3 不能以 32 或 64 位浮点数准确表示，计算它会导致引发此异常。 精确异常非常常见，因此它们通常被屏蔽。</li><li>
<p><code>_MM_EXCEPT_INEXACT</code>: An inexact-result exception occured (a.k.a.
precision exception). This means some precision was lost due to rounding.
For example, the fraction <code>1/3</code> cannot be represented accurately in a
32 or 64 bit float and computing it would cause this exception to be
raised. Precision exceptions are very common, so they are usually masked.</p>
</li>
</ul>
<p class="translate-text">可以使用便利函数 _MM_GET_EXCEPTION_STATE 和 _MM_SET_EXCEPTION_STATE 读取和设置异常标志。 例如，检查某个操作是否导致溢出：</p><p>Exception flags can be read and set using the convenience functions
<code>_MM_GET_EXCEPTION_STATE</code> and <code>_MM_SET_EXCEPTION_STATE</code>. For example, to
check if an operation caused some overflow:</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">_MM_SET_EXCEPTION_STATE</span>(<span class="number">0</span>); <span class="comment">// clear all exception flags</span>
                            <span class="comment">// perform calculations</span>
<span class="kw">if</span> <span class="ident">_MM_GET_EXCEPTION_STATE</span>() <span class="op">&amp;</span> <span class="ident">_MM_EXCEPT_OVERFLOW</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span> {
    <span class="comment">// handle overflow</span>
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0A_MM_SET_EXCEPTION_STATE(0)%3B%20%2F%2F%20clear%20all%20exception%20flags%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20perform%20calculations%0Aif%20_MM_GET_EXCEPTION_STATE()%20%26%20_MM_EXCEPT_OVERFLOW%20!%3D%200%20%7B%0A%20%20%20%20%2F%2F%20handle%20overflow%0A%7D%0A%7D&amp;edition=2018">Run</a></div>
<h2 id="masking-flags" class="section-header"><a href="#masking-flags">Masking Flags</a></h2>
<p class="translate-text">每个异常标志都有一个屏蔽标志：_MM_MASK_INVALID、_MM_MASK_DENORM、_MM_MASK_DIV_ZERO、_MM_MASK_OVERFLOW、_MM_MASK_UNDERFLOW、_MM_MASK_INEXACT。</p><p>There is one masking flag for each exception flag: <code>_MM_MASK_INVALID</code>,
<code>_MM_MASK_DENORM</code>, <code>_MM_MASK_DIV_ZERO</code>, <code>_MM_MASK_OVERFLOW</code>,
<code>_MM_MASK_UNDERFLOW</code>, <code>_MM_MASK_INEXACT</code>.</p>
<p class="translate-text">单个屏蔽位可以通过设置</p><p>A single masking bit can be set via</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">_MM_SET_EXCEPTION_MASK</span>(<span class="ident">_MM_MASK_UNDERFLOW</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0A_MM_SET_EXCEPTION_MASK(_MM_MASK_UNDERFLOW)%3B%0A%7D&amp;edition=2018">Run</a></div>
<p class="translate-text">但是，由于默认情况下掩码位都设置为 1，因此更常见的是要禁用某些位。 例如，要取消屏蔽下溢异常，请使用：</p><p>However, since mask bits are by default all set to 1, it is more common to
want to <em>disable</em> certain bits. For example, to unmask the underflow
exception, use:</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">_mm_setcsr</span>(<span class="ident">_mm_getcsr</span>() <span class="op">&amp;</span> <span class="op">!</span><span class="ident">_MM_MASK_UNDERFLOW</span>); <span class="comment">// unmask underflow</span>
<span class="ident">exception</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0A_mm_setcsr(_mm_getcsr()%20%26%20!_MM_MASK_UNDERFLOW)%3B%20%2F%2F%20unmask%20underflow%0Aexception%0A%7D&amp;edition=2018">Run</a></div>
<p class="translate-text">警告：未屏蔽的异常将导致调用异常处理程序。 标准处理程序将简单地终止进程。 因此，在这种情况下，任何下溢异常都会终止当前进程，并使用类似信号：8，SIGFPE：错误算术运算。</p><p>Warning: an unmasked exception will cause an exception handler to be
called.
The standard handler will simply terminate the process. So, in this case
any underflow exception would terminate the current process with something
like <code>signal: 8, SIGFPE: erroneous arithmetic operation</code>.</p>
<h2 id="rounding-mode" class="section-header"><a href="#rounding-mode">Rounding Mode</a></h2>
<p class="translate-text">使用两位描述舍入模式。 可以使用方便的包装器 _MM_GET_ROUNDING_MODE() 和 _MM_SET_ROUNDING_MODE(mode) 读取和设置它。</p><p>The rounding mode is describe using two bits. It can be read and set using
the convenience wrappers <code>_MM_GET_ROUNDING_MODE()</code> and
<code>_MM_SET_ROUNDING_MODE(mode)</code>.</p>
<p class="translate-text">舍入模式有：</p><p>The rounding modes are:</p>
<ul>
<li class="translate-text">_MM_ROUND_NEAREST：（默认）舍入到最接近无限精度值。 如果两个值同样接近，则舍入为偶数（即，最低有效位为零）。</li><li>
<p><code>_MM_ROUND_NEAREST</code>: (default) Round to closest to the infinite precision
value. If two values are equally close, round to even (i.e., least
significant bit will be zero).</p>
</li>
<li class="translate-text">_MM_ROUND_DOWN：向负无穷大舍入。</li><li>
<p><code>_MM_ROUND_DOWN</code>: Round toward negative Infinity.</p>
</li>
<li class="translate-text">_MM_ROUND_UP：向正无穷大舍入。</li><li>
<p><code>_MM_ROUND_UP</code>: Round toward positive Infinity.</p>
</li>
<li class="translate-text">_MM_ROUND_TOWARD_ZERO：向零舍入（截断）。</li><li>
<p><code>_MM_ROUND_TOWARD_ZERO</code>: Round towards zero (truncate).</p>
</li>
</ul>
<p class="translate-text">例子：</p><p>Example:</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">_MM_SET_ROUNDING_MODE</span>(<span class="ident">_MM_ROUND_DOWN</span>)</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0A_MM_SET_ROUNDING_MODE(_MM_ROUND_DOWN)%0A%7D&amp;edition=2018">Run</a></div>
<h2 id="denormals-are-zeroflush-to-zero-mode" class="section-header"><a href="#denormals-are-zeroflush-to-zero-mode">Denormals-are-zero/Flush-to-zero Mode</a></h2>
<p class="translate-text">如果设置了该位，则将被非规范化的值将设置为零。 这是默认关闭的。</p><p>If this bit is set, values that would be denormalized will be set to zero
instead. This is turned off by default.</p>
<p class="translate-text">您可以通过辅助函数 _MM_GET_FLUSH_ZERO_MODE() 和 _MM_SET_FLUSH_ZERO_MODE() 读取和启用/禁用此模式：</p><p>You can read and enable/disable this mode via the helper functions
<code>_MM_GET_FLUSH_ZERO_MODE()</code> and <code>_MM_SET_FLUSH_ZERO_MODE()</code>:</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">_MM_SET_FLUSH_ZERO_MODE</span>(<span class="ident">_MM_FLUSH_ZERO_OFF</span>); <span class="comment">// turn off (default)</span>
<span class="ident">_MM_SET_FLUSH_ZERO_MODE</span>(<span class="ident">_MM_FLUSH_ZERO_ON</span>); <span class="comment">// turn on</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0A_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_OFF)%3B%20%2F%2F%20turn%20off%20(default)%0A_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON)%3B%20%2F%2F%20turn%20on%0A%7D&amp;edition=2018">Run</a></div>
<p class="translate-text">英特尔的文档</p><p><a href="https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_setcsr">Intel’s documentation</a></p>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="core" data-search-index-js="../../../search-index1.56.1.js" data-search-js="../../../search1.56.1.js"></div>
    <script src="../../../main1.56.1.js"></script>
</body></html>